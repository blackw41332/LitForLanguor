<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">

  <title>{{ page.title }} | {{ site.title | default: 'Lit for Languor' }}</title>
  <link rel="stylesheet" href="{{ '/assets/css/style.css' | relative_url }}">
</head>
<body>
  <header class="site-header">
    <div class="container">
      <h1><a href="{{ '/' | relative_url }}">{{ site.title | default: 'Lit for Languor' }}</a></h1>
      <nav class="site-nav">
        <a href="{{ '/' | relative_url }}">Home</a>
        <a href="{{ '/stories/' | relative_url }}">Stories</a>
        <a href="{{ '/poems/' | relative_url }}">Poems</a>
        <a href="{{ '/short-stories/' | relative_url }}">Short Stories</a>
        <a href="{{ '/reading-of-the-day/' | relative_url }}">Daily Read</a>
      </nav>
      <button id="theme-toggle" aria-label="Toggle theme"></button>
    </div>
  </header>

  <main class="content">
    <div class="container">
      {{ content }}
    </div>
  </main>

  <footer class="site-footer">
    <div class="container">
      <small>&copy; {{ site.time | date: "%Y" }} {{ site.title | default: "Lit for Languor" }}</small>
    </div>
  </footer>
  <script>
  const btn = document.getElementById('theme-toggle');
  const root = document.documentElement;
  const icons = { light: 'ðŸŒ™', dark: 'â˜€ï¸' };

  // Initialize theme & icon
  let theme = localStorage.getItem('theme');
  if (!theme) {
    // default to system preference
    theme = window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';
  }
  root.setAttribute('data-theme', theme);
  btn.textContent = icons[theme];

  // Toggle on click
  btn.addEventListener('click', () => {
    theme = root.getAttribute('data-theme') === 'dark' ? 'light' : 'dark';
    root.setAttribute('data-theme', theme);
    localStorage.setItem('theme', theme);
    btn.textContent = icons[theme];
  });
</script>
<!-- reading-of-the-day randomizer -->
<h2>Reading of the Day</h2>
<div id="daily-reading"></div>

<script>
  // Build an array of all .docx file URLs
  var readings = [
    {% assign docs = site.static_files | where: "extname", ".docx" %}
    {% for f in docs %}
      "{{ f.path | relative_url }}"{% unless forloop.last %},{% endunless %}
    {% endfor %}
  ];

  // Pick one at random
  var choice = readings[Math.floor(Math.random() * readings.length)];

  // Render the link
  if (choice) {
    document.getElementById("daily-reading").innerHTML =
      '<a href="' + choice + '">Click here to read today\'s selection</a>';
  } else {
    document.getElementById("daily-reading").innerHTML =
      "Sorry, no readings available.";
  }
</script>

</body>
</html>
